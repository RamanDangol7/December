<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
</head>
<body>
    <div class = "form">
        <h1>Enter your details.</h1><br>
        <form id="form"  method="POST">
        <label>
            First name: <input type="text" name = "fname" id="fname" required>
        </label>
        <label>
            Last name : <input type ="text" name ="lname" id ="lname" required><br>
        </label>
        <label>
            Email : <input type ="email" name ="email" id="email"required><br>
        </label>
         <label>
            Number : <input type ="text" name ="number" id="number"required><br>
        </label>
         <label>
            Gender :
             <input type ="radio" name ="gender" id="male" value="male" required>Male
             <input type ="radio" name ="gender" id="female" value="female">Female
             <input type ="radio" name ="gender" id="other" value="other">Other<br>
        </label>
        <label>
            Username :<input type="text" name="username" id="username" required><br>
        </label>
        <label>
            Password :<input type ="password" name="password" id="password" required><br>
        </label>
        <label>
            <input type="submit" name="submit" value="Submit" id ="submit" >
        </label>
        <label>
           <button onclick="window.location.href='login.html'">Back</button>
        </label>
        <p id="demo"></p>
    </div>
</form>

<script>
   
   
   /*const form = document.getElementById('form');

    form.addEventListener("submit",(event)=>{

        event.preventDefault();

        const xhttp = new XMLHttpRequest();
        const formData =  new FormData(form);

        xhttp.onload=function(){
            
            if(this.responseText.trim() === "Success"){
                document.getElementById("demo").innerText=responseText;
                //window.location.href="dashboard/dashboard.html";
            }
        }
        xhttp.open("POST","register.php");
        xhttp.send(formData);

    });
    */

   //Using Fetch

   const form = document.getElementById("form");

   form.addEventListener("submit",(event)=>{

        event.preventDefault();
            const formdata = new FormData(form);

            fetch("register.php",{
                method:"POST",
                body:formdata

            })

            .then(response=>response.json())
            .then(data=>{
                if(data === "success"){
                    document.getElementById("demo").innerHTML=data.message;
                    document.getElementById("demo").style.color="green";
                }
                else{
                    document.getElementById("demo").innerHTML=data.message;
                    document.getElementById("demo").style.color="red";
                }
            })
            .catch(error=>{
                console.error("Fetch error:",error);
            })
   });
</script>
</body>
</html>